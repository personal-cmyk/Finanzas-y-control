<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Control Jarol - Finanzas Inteligentes</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="app-container">
        <header>
            <div class="header-content">
                <div class="header-title">üí∞ Control Jarol</div>
                <div style="display: flex; gap: 1rem; align-items: center;">
                    <button class="theme-toggle" id="themeToggle" title="Cambiar tema">üåô</button>
                    <button onclick="logout()"
                        style="padding: 0.5rem 1rem; background: rgba(239, 68, 68, 0.2); border: 1px solid #ef4444; color: #ef4444; border-radius: 8px; cursor: pointer; font-size: 0.875rem; font-weight: 600; transition: all 0.3s;"
                        title="Cerrar sesi√≥n">üö™ Salir</button>
                </div>
            </div>
        </header>

        <!-- NAVIGATION TABS -->
        <div class="nav-tabs">
            <button class="nav-tab active" onclick="switchPage('dashboard', this)">üìä Dashboard</button>
            <button class="nav-tab" onclick="switchPage('deudas', this)">üí≥ Deudas</button>
            <button class="nav-tab" onclick="switchPage('moto', this)">üèçÔ∏è Mantenimiento Moto</button>
        </div>

        <div class="main-content">
            <!-- ============ DASHBOARD PAGE ============ -->
            <div id="dashboard" class="page-content active">
                <div class="dashboard-grid">
                    <div class="stat-card">
                        <div class="stat-label">Ingresos Totales</div>
                        <div class="stat-value" id="totalIncome">$0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Gastos Totales</div>
                        <div class="stat-value" id="totalExpenses">$0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Total Deudas</div>
                        <div class="stat-value" id="totalDebtsDisplay">$0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Dinero Disponible</div>
                        <div class="stat-value" id="availableMoney">$0</div>
                    </div>
                </div>

                <div class="quick-input-section">
                    <button class="quick-button" onclick="openModal('income-modal')">‚ûï Ingreso</button>
                    <button class="quick-button" onclick="openModal('expense-modal')">üõí Gasto</button>
                </div>

                <h2 class="section-title" style="margin-top: 2rem;">üìù Historial de Transacciones</h2>
                <div id="transactionsList">
                    <div class="empty-state">
                        <div class="empty-state-icon">üìä</div>
                        <div>Sin transacciones registradas</div>
                    </div>
                </div>

                <div id="insightsContainer"></div>
            </div>

            <!-- ============ DEUDAS PAGE ============ -->
            <div id="deudas" class="page-content">
                <div class="quick-input-section">
                    <button class="quick-button" onclick="openModal('debt-modal')">‚ûï Agregar Deuda</button>
                    <button class="quick-button" onclick="openModal('make-payment-modal')">üí∞ Registrar Pago</button>
                </div>

                <div class="deudas-container">
                    <div class="deudas-left">
                        <h2 class="section-title">üìã Mis Deudas</h2>
                        <div id="debtsList">
                            <div class="empty-state">
                                <div class="empty-state-icon">üí≥</div>
                                <div>Sin deudas registradas. ¬°Qu√© bien!</div>
                            </div>
                        </div>
                    </div>

                    <div class="deudas-right">
                        <h2 class="section-title">üìä Resumen</h2>
                        <div class="stat-card">
                            <div class="stat-label">Deuda Total</div>
                            <div class="stat-value" id="totalDebtAmount">$0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Total Pagado</div>
                            <div class="stat-value" id="totalPaidAmount" style="color: var(--success);">$0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Total Pendiente</div>
                            <div class="stat-value" id="totalPendingAmount" style="color: var(--danger);">$0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Cuota Promedio</div>
                            <div class="stat-value" id="avgPaymentAmount">$0</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ============ MOTO PAGE ============ -->
            <div id="moto" class="page-content">
                <div class="quick-input-section">
                    <button class="quick-button" onclick="openModal('maintenance-modal')">üîß Nuevo Servicio</button>
                    <button class="quick-button" onclick="generateMotoReport()">üìä Generar Reporte</button>
                </div>

                <div class="moto-container">
                    <div class="moto-stats">
                        <div class="moto-stat-card">
                            <div class="moto-stat-value" id="motoKilometers">0</div>
                            <div class="moto-stat-label">Km Actuales</div>
                        </div>
                        <div class="moto-stat-card">
                            <div class="moto-stat-value" id="motoServices">0</div>
                            <div class="moto-stat-label">Servicios</div>
                        </div>
                        <div class="moto-stat-card">
                            <div class="moto-stat-value" id="motoTotalCost">$0</div>
                            <div class="moto-stat-label">Inversi√≥n Total</div>
                        </div>
                    </div>

                    <h2 class="section-title">üõ†Ô∏è Historial de Mantenimiento</h2>
                    <div id="maintenanceList">
                        <div class="empty-state">
                            <div class="empty-state-icon">üèçÔ∏è</div>
                            <div>Sin servicios registrados</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ========== MODALS ========== -->

    <!-- Income Modal -->
    <div id="income-modal" class="modal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal('income-modal')">‚úï</button>
            <div class="modal-header">üíµ Nuevo Ingreso</div>
            <form id="incomeForm">
                <div class="form-group">
                    <label class="form-label">Fuente</label>
                    <select class="form-select" id="incomeSource" required>
                        <option value="">Selecciona</option>
                        <option value="Sueldo">Sueldo</option>
                        <option value="Freelance">Freelance</option>
                        <option value="Otro">Otro</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Monto</label>
                    <input type="number" class="form-input" id="incomeAmount" placeholder="0.00" step="0.01" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Fecha</label>
                    <input type="date" class="form-input" id="incomeDate" required>
                </div>
                <button type="submit" class="btn btn-primary">Guardar Ingreso</button>
            </form>
        </div>
    </div>

    <!-- Expense Modal -->
    <div id="expense-modal" class="modal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal('expense-modal')">‚úï</button>
            <div class="modal-header">üõí Nuevo Gasto</div>
            <form id="expenseForm">
                <div class="form-group">
                    <label class="form-label">Categor√≠a</label>
                    <select class="form-select" id="expenseCategory" required>
                        <option value="">Selecciona</option>
                        <option value="Alimentaci√≥n">Alimentaci√≥n</option>
                        <option value="Transporte">Transporte</option>
                        <option value="Entretenimiento">Entretenimiento</option>
                        <option value="Servicios">Servicios</option>
                        <option value="Salud">Salud</option>
                        <option value="Otro">Otro</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Descripci√≥n</label>
                    <input type="text" class="form-input" id="expenseDescription" placeholder="¬øEn qu√©?" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Monto</label>
                    <input type="number" class="form-input" id="expenseAmount" placeholder="0.00" step="0.01" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Fecha</label>
                    <input type="date" class="form-input" id="expenseDate" required>
                </div>
                <button type="submit" class="btn btn-primary">Guardar Gasto</button>
            </form>
        </div>
    </div>

    <!-- Debt Modal -->
    <div id="debt-modal" class="modal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal('debt-modal')">‚úï</button>
            <div class="modal-header">üí≥ Nueva Deuda</div>
            <form id="debtForm">
                <div class="form-group">
                    <label class="form-label">Tipo de Deuda</label>
                    <input type="text" class="form-input" id="debtType" placeholder="Ej: Banco, Amigo, Tarjeta"
                        required>
                </div>
                <div class="form-group">
                    <label class="form-label">Monto Total</label>
                    <input type="number" class="form-input" id="debtAmount" placeholder="0.00" step="0.01" required>
                </div>
                <div class="form-group">
                    <label class="form-label">N√∫mero de Cuotas</label>
                    <input type="number" class="form-input" id="debtInstallments" placeholder="1" min="1" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Frecuencia (d√≠as)</label>
                    <input type="number" class="form-input" id="debtFrequency" value="30" min="1" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Fecha de Adquisici√≥n</label>
                    <input type="date" class="form-input" id="debtAcquisitionDate" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Fecha Primera Cuota</label>
                    <input type="date" class="form-input" id="debtFirstDueDate" required>
                </div>
                <button type="submit" class="btn btn-primary">Agregar Deuda</button>
            </form>
        </div>
    </div>

    <!-- Payment Modal -->
    <div id="make-payment-modal" class="modal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal('make-payment-modal')">‚úï</button>
            <div class="modal-header">üí∞ Registrar Pago</div>
            <form id="paymentForm">
                <div class="form-group">
                    <label class="form-label">Seleccionar Deuda</label>
                    <select class="form-select" id="debtSelect" required>
                        <option value="">Cargando deudas...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Monto del Pago</label>
                    <input type="number" class="form-input" id="paymentAmount" placeholder="0.00" step="0.01" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Fecha del Pago</label>
                    <input type="date" class="form-input" id="paymentDate" required>
                </div>
                <button type="submit" class="btn btn-primary">Registrar Pago</button>
            </form>
        </div>
    </div>

    <!-- Edit Transaction Modal -->
    <div id="edit-transaction-modal" class="modal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal('edit-transaction-modal')">‚úï</button>
            <div class="modal-header">‚úèÔ∏è Editar Transacci√≥n</div>
            <form id="editTransactionForm">
                <div class="form-group">
                    <label class="form-label">Tipo</label>
                    <select class="form-select" id="editTransactionType" required disabled>
                        <option value="income">Ingreso</option>
                        <option value="expense">Gasto</option>
                    </select>
                </div>
                <div id="editIncomeFields">
                    <div class="form-group">
                        <label class="form-label">Fuente</label>
                        <select class="form-select" id="editIncomeSource" required>
                            <option value="">Selecciona</option>
                            <option value="Sueldo">Sueldo</option>
                            <option value="Freelance">Freelance</option>
                            <option value="Otro">Otro</option>
                        </select>
                    </div>
                </div>
                <div id="editExpenseFields" style="display: none;">
                    <div class="form-group">
                        <label class="form-label">Categor√≠a</label>
                        <select class="form-select" id="editExpenseCategory" required>
                            <option value="">Selecciona</option>
                            <option value="Alimentaci√≥n">Alimentaci√≥n</option>
                            <option value="Transporte">Transporte</option>
                            <option value="Entretenimiento">Entretenimiento</option>
                            <option value="Servicios">Servicios</option>
                            <option value="Salud">Salud</option>
                            <option value="Otro">Otro</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Descripci√≥n</label>
                        <input type="text" class="form-input" id="editExpenseDescription" placeholder="¬øEn qu√©?"
                            required>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Monto</label>
                    <input type="number" class="form-input" id="editTransactionAmount" placeholder="0.00" step="0.01"
                        required>
                </div>
                <div class="form-group">
                    <label class="form-label">Fecha</label>
                    <input type="date" class="form-input" id="editTransactionDate" required>
                </div>
                <button type="submit" class="btn btn-primary">Guardar Cambios</button>
            </form>
        </div>
    </div>

    <!-- Maintenance Modal -->
    <div id="maintenance-modal" class="modal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal('maintenance-modal')">‚úï</button>
            <div class="modal-header">üîß Nuevo Mantenimiento</div>
            <form id="maintenanceForm">
                <div class="form-group">
                    <label class="form-label">Tipo de Servicio</label>
                    <select class="form-select" id="maintenanceType" required>
                        <option value="">Selecciona servicio</option>
                        <option value="Cambio de Aceite">Cambio de Aceite</option>
                        <option value="Cambio de Filtro">Cambio de Filtro</option>
                        <option value="Revisi√≥n General">Revisi√≥n General</option>
                        <option value="Cambio de Llantas">Cambio de Llantas</option>
                        <option value="Reparaci√≥n Motor">Reparaci√≥n Motor</option>
                        <option value="Mantenimiento Frenos">Mantenimiento Frenos</option>
                        <option value="Cambio de Buj√≠as">Cambio de Buj√≠as</option>
                        <option value="Otro">Otro</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Descripci√≥n</label>
                    <input type="text" class="form-input" id="maintenanceDescription" placeholder="Detalles" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Costo</label>
                    <input type="number" class="form-input" id="maintenanceCost" placeholder="0.00" step="0.01"
                        required>
                </div>
                <div class="form-group">
                    <label class="form-label">Kil√≥metros de la Moto</label>
                    <input type="number" class="form-input" id="maintenanceKm" placeholder="0" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Fecha</label>
                    <input type="date" class="form-input" id="maintenanceDate" required>
                </div>
                <button type="submit" class="btn btn-primary">Registrar</button>
            </form>
        </div>
    </div>

    <div class="keyboard-shortcut" id="shortcutHint"></div>

    <script src="app.js"></script>
</body>

</html>